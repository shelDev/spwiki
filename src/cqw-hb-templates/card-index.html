<!-- Source: https://sharepoint.handsontek.net/2020/05/10/create-index-sharepoint-spaces-using-content-query-web-part/ -->

<style type="text/css">
    .dynamic-template h2 {
        font-size: 24px;
        font-weight: 300;
        color: "[theme:neutralPrimary, default:#323130]";
    }
 
    .space-card {
        display: block;
        -webkit-box-shadow: 0 1.6px 3.6px 0 rgba(0,0,0,0.132), 0 0.3px 0.9px 0 rgba(0,0,0,0.108);
        box-shadow: 0 1.6px 3.6px 0 rgba(0,0,0,0.132), 0 0.3px 0.9px 0 rgba(0,0,0,0.108);
        border-radius: 2px;
        background-clip: padding-box;
        -webkit-transition: all 300ms cubic-bezier(0.8, 0, 0.2, 1);
        transition: all 300ms cubic-bezier(0.8, 0, 0.2, 1);		
        margin-bottom: 16px;	
        background-color: "[theme:whiteTranslucent40, default: rgba(255,255,255,.4)]";	
    }
    
    .space-link, .space-link:visited{
        color: "[theme:themePrimary, default: #0078d4]";
        text-decoration: none;
    }
    
    .space-link:hover{
        color: "[theme:themeLighter, default: #c7e0f4]";;
        text-decoration: none;
    }
    
    .space-card:hover{
        background-color: "[theme:themeSecondary, default: #2b88d8]";
    }
    
    .card-image{
        height:150px;
        border-top-left-radius: 2px;
        border-top-right-radius: 2px;
    }
    
    .card-title {
        padding: 20px;
        text-align: center;
        font-size: 20px;
        font-weight: 100;
    }
</style>
 
<div class="dynamic-template">
  <h2>Space Libraries</h2>
  <div class="ms-Grid-row ">
      {{#each items}}          
          <a href="{{FileRef.textValue}}" class="ms-Grid-col ms-sm12 ms-md3 block space-link">
            <div class="space-card">
                <div class="card-image" style="background-image: url('{{BannerImageUrl.rawValue.Url}}'); background-position: center center; background-size:cover;"></div>	
                <div class="dynamic-item-fields card-title">
                    <span class='ms-DetailsRow-cell'>{{Title.textValue}}</span>					
                </div>
            </div>
          </a>
      {{/each}}
  </div>
</div>